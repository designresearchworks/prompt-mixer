<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Prompt Weight Mixer</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:       #0b0b13;
  --surface:  #11111c;
  --surface2: #181828;
  --border:   #1e1e32;
  --border2:  #2a2a45;
  --muted:    #484868;
  --text:     #c4c4de;
  --accent:   #7c5cfc;
  --green:    #22c55e;
  --gold:     #d97706;
}

html, body {
  min-height: 100vh;
  background: var(--bg);
  color: var(--text);
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
}

.menu-wrap {
  max-width: 680px;
  margin: 0 auto;
  padding: 80px 24px;
}

.menu-title {
  font-size: 28px;
  font-weight: 700;
  letter-spacing: -0.5px;
  color: #e4e4f8;
  margin-bottom: 6px;
}

.menu-sub {
  font-size: 13px;
  color: var(--muted);
  line-height: 1.7;
  margin-bottom: 48px;
}

.cards {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
  margin-bottom: 26px;
}

.card {
  flex: 1 1 200px;
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: 14px;
  padding: 32px 28px;
  text-decoration: none;
  color: inherit;
  transition: border-color 0.2s, transform 0.15s, box-shadow 0.2s;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.card:hover {
  border-color: var(--accent);
  transform: translateY(-3px);
  box-shadow: 0 8px 32px rgba(124,92,252,0.12);
}

.card-icon {
  font-size: 32px;
  opacity: 0.7;
}

.card-name {
  font-size: 17px;
  font-weight: 700;
  color: #e4e4f8;
}

.card-desc {
  font-size: 12px;
  color: var(--muted);
  line-height: 1.7;
}

.card-arrow {
  margin-top: auto;
  padding-top: 8px;
  font-size: 11px;
  color: var(--accent);
  font-weight: 600;
  letter-spacing: 1px;
}

.keys-panel {
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: 14px;
  padding: 18px 20px;
}
.keys-title {
  font-size: 12px;
  letter-spacing: 1.6px;
  text-transform: uppercase;
  color: var(--muted);
  font-weight: 700;
  margin-bottom: 12px;
}
.keys-grid {
  display: grid;
  gap: 10px;
}
.keys-grid input {
  width: 100%;
  background: var(--surface2);
  color: var(--text);
  border: 1px solid var(--border2);
  border-radius: 8px;
  padding: 10px 12px;
  font-size: 12px;
  outline: none;
}
.keys-grid input:focus {
  border-color: var(--accent);
}
.keys-actions {
  margin-top: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
}
.keys-save {
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
}
.keys-save:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}
.keys-status {
  font-size: 12px;
  color: var(--muted);
}
.keys-status.ok { color: #7dd3fc; }
.keys-status.err { color: #fda4af; }

@media (max-width: 720px) {
  .cards { flex-direction: column; }
}
</style>
</head>
<body>
<div class="menu-wrap">
  <div class="menu-title">Prompt Weight Mixer</div>
  <div class="menu-sub">
    Explore how weighting individual words and concepts influences LLM output in real time.
    Choose a mode below.
  </div>

  <div class="cards">

    <a class="card" href="sentence-mixer.html">
      <div class="card-icon">&#9783;</div>
      <div class="card-name">Sentence Mixer</div>
      <div class="card-desc">
        Set a mission, load an influence sentence, and drag words
        up or down to control how strongly each shapes the generated output.
      </div>
      <div class="card-arrow">Open &rarr;</div>
    </a>

    <a class="card" href="paragraph-adapter.html">
      <div class="card-icon">&#10227;</div>
      <div class="card-name">Paragraph Adapter</div>
      <div class="card-desc">
        Paste a source paragraph, define transformation concepts,
        and mix their weights to see the paragraph rewritten in real time.
      </div>
      <div class="card-arrow">Open &rarr;</div>
    </a>

    <a class="card" href="paragraph-adapter-feedback.html">
      <div class="card-icon">&#9851;</div>
      <div class="card-name">Paragraph Adapter + Feedback</div>
      <div class="card-desc">
        Run paragraph adaptation, then use Feedback to overwrite
        the original thought with the latest output.
      </div>
      <div class="card-arrow">Open &rarr;</div>
    </a>

  </div>

  <div class="keys-panel">
    <div class="keys-title">Save API Keys To .env</div>
    <div class="keys-grid">
      <input id="openrouter-key" type="password" placeholder="OPENROUTER_API_KEY">
      <input id="groq-key" type="password" placeholder="GROQ_API_KEY">
    </div>
    <div class="keys-actions">
      <button id="save-keys-btn" class="keys-save" onclick="saveApiKeys()">Save Keys</button>
      <div id="keys-status" class="keys-status"></div>
    </div>
  </div>
</div>
<script>
async function saveApiKeys() {
  const openrouter = document.getElementById('openrouter-key').value.trim();
  const groq = document.getElementById('groq-key').value.trim();
  const status = document.getElementById('keys-status');
  const btn = document.getElementById('save-keys-btn');

  status.className = 'keys-status';
  status.textContent = '';

  if (!openrouter && !groq) {
    status.className = 'keys-status err';
    status.textContent = 'Enter at least one key';
    return;
  }

  btn.disabled = true;
  status.textContent = 'Saving...';

  try {
    const response = await fetch('/api/save-keys', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        openrouter_api_key: openrouter || null,
        groq_api_key: groq || null
      })
    });

    const data = await response.json();
    if (!response.ok || !data.ok) {
      throw new Error(data && data.message ? data.message : 'Failed to save keys');
    }

    status.className = 'keys-status ok';
    status.textContent = 'Saved to .env';
    document.getElementById('openrouter-key').value = '';
    document.getElementById('groq-key').value = '';
  } catch (err) {
    status.className = 'keys-status err';
    status.textContent = (err && err.message) ? err.message : 'Save failed';
  } finally {
    btn.disabled = false;
  }
}
</script>
</body>
</html>
