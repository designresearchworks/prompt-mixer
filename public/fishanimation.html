<!DOCTYPE html><html lang="en"><head><meta name="x-poe-datastore-behavior" content="local_only"><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Shark Chomp!</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#020c1a;display:flex;justify-content:center;align-items:center;min-height:100vh;overflow:hidden}
pre{font-family:'Courier New',monospace;font-size:clamp(7px,1.9vw,15px);line-height:1.18;user-select:none}
.w{color:#1a6688}.f{color:#ffd700}.k{color:#c8d0d8}.t{color:#ff2244;font-weight:bold}.e{color:#ff4444}
</style>
</head>
<body>
<pre id="s"></pre>
<script>
(()=>{
const W=62,H=30,$=document.getElementById('s');
let t=0;
const mk=()=>Array.from({length:H},()=>({c:Array(W).fill(' '),k:Array(W).fill('w')}));
function set(g,r,c,ch,k){if(r>=0&&r<H&&c>=0&&c<W&&ch!==' '){g[r].c[c]=ch;g[r].k[c]=k||'w'}}
function put(g,r,c,s,k){for(let i=0;i<s.length;i++)set(g,r,c+i,s[i],k)}
function putA(g,r,c,s,k){for(let i=0;i<s.length;i++){const x=c+i;if(r>=0&&r<H&&x>=0&&x<W){g[r].c[x]=s[i];g[r].k[x]=k||'w'}}}
const esc=c=>c==='<'?'&lt;':c==='>'?'&gt;':c==='&'?'&amp;':c;
function render(g){
    let h='';
    for(let r=0;r<H;r++){
        let pk='',l='';
        for(let c=0;c<W;c++){
            const k=g[r].k[c];
            if(k!==pk){if(pk)l+='</span>';l+=`<span class="${k}">`;pk=k}
            l+=esc(g[r].c[c]);
        }
        if(pk)l+='</span>';h+=l+'\n';
    }
    $.innerHTML=h;
}

// Ambient bubbles
const bubs=[];
function doBubs(g){
    if(t%14===0&&bubs.length<12)bubs.push({x:Math.random()*W,y:H-1,s:.2+Math.random()*.25,c:['o','O','\xb0'][0|Math.random()*3]});
    for(let i=bubs.length-1;i>=0;i--){
        const b=bubs[i];b.y-=b.s;b.x+=Math.sin(t*.08+i)*.15;
        if(b.y<0){bubs.splice(i,1);continue}
        set(g,Math.round(b.y),Math.round(b.x),b.c,'w');
    }
}

// Animated water
function water(g){
    for(let r=0;r<H;r++)for(let c=0;c<W;c++){
        const v=Math.sin(c*.22+t*.055)+Math.sin(r*.38+t*.03)+Math.sin((c+r)*.15+t*.04);
        if(v>2.4)set(g,r,c,'~','w');else if(v>2.2)set(g,r,c,'.','w');else if(v>2.05)set(g,r,c,'\xb7','w');
    }
}

// Top jaw (teeth down), 5 rows
function topJ(g,y,cx,hw){
    for(let i=0;i<5;i++){const r=y+i,w=hw-i,L=cx-w,R=cx+w;
        set(g,r,L,'\\','k');set(g,r,R,'/','k');
        if(i===4)for(let c=L+1;c<R;c++)set(g,r,c,'_','k');
        if(i===2)for(let c=L+3;c<=R-3;c+=3)set(g,r,c,'V','k');
        if(i===3)for(let c=L+3;c<=R-3;c+=3)set(g,r,c,'|','k');
    }
}

// Bottom jaw (teeth up), 5 rows
function botJ(g,y,cx,hw){
    for(let i=0;i<5;i++){const r=y+i,w=hw-4+i,L=cx-w,R=cx+w;
        set(g,r,L,'/','k');set(g,r,R,'\\','k');
        if(i===0)for(let c=L+1;c<R;c++)set(g,r,c,'_','k');
        if(i===1)for(let c=L+3;c<=R-3;c+=3)set(g,r,c,'|','k');
        if(i===2)for(let c=L+3;c<=R-3;c+=3)set(g,r,c,'^','k');
    }
}

// Closed jaw, 2 rows
function clJ(g,y,cx,hw){
    const L=cx-hw,R=cx+hw;
    set(g,y,L,'\\','k');set(g,y,R,'/','k');
    for(let c=L+1;c<R;c++)set(g,y,c,(c-L)%3===0?'V':'_','k');
    set(g,y+1,L,'/','k');set(g,y+1,R,'\\','k');
    for(let c=L+1;c<R;c++)set(g,y+1,c,(c-L+1)%3===0?'^':'~','k');
}

const eio=x=>x<.5?2*x*x:1-(-2*x+2)**2/2;
const ein=x=>x*x*x;
const D=[55,45,10,40,30],TOT=D.reduce((a,b)=>a+b);
function ph(){let f=t%TOT;for(let i=0;i<5;i++){if(f<D[i])return[i,f/D[i]];f-=D[i]}return[4,1]}

const FR=12,CX=31,HW=21,GAP=8;
const OT=FR-4-GAP/2,CT=FR-4;
const OB=FR+1+GAP/2,CB=FR+1;

function frame(){
    const g=mk();water(g);doBubs(g);
    const[p,pr]=ph();

    // Fish
    if(p===0){
        const fc=CX-3+Math.round(Math.sin(t*.08)*10);
        put(g,FR,fc,Math.cos(t*.08)>0?'><(((o>':'<o)))><','f');
        if(t%8===0)set(g,FR-1,fc+(Math.cos(t*.08)>0?7:0),'o','f');
    }else if(p===1){
        const bc=CX-3+Math.round(Math.sin(D[0]*.08)*10);
        const fc=bc+Math.round(Math.sin(t*.5)*(1+pr*3));
        put(g,FR,fc,pr>.6?'><(((O>':'><(((o>','f');
        if(t%3===0)set(g,FR-1,fc+(0|Math.random()*7),'o','f');
        if(pr>.3&&pr<.7)put(g,FR-2,fc+2,'!!','t');
    }else if(p===2&&pr<.35){
        put(g,FR,CX-3,'><(((O>','f');
    }

    // Shark
    if(p===1){
        const lp=eio(Math.min(1,pr*1.3)),up=eio(Math.max(0,(pr-.15)/.85));
        const bY=Math.round(H+2+lp*(OB-H-2));
        const tY=Math.round(H+14+up*(OT-H-14));
        botJ(g,bY,CX,HW);topJ(g,tY,CX,HW);
        set(g,tY-1,CX-6,'@','e');set(g,tY-1,CX+6,'@','e');
        if(pr<.12){const sw=Math.round(pr/.12*14);for(let c=CX-sw;c<=CX+sw;c++)set(g,H-1,c,'=','k')}
    }else if(p===2){
        const ep=ein(pr);
        const tY=Math.round(OT+ep*(CT-OT)),bY=Math.round(OB+ep*(CB-OB));
        if(ep<.8){topJ(g,tY,CX,HW);botJ(g,bY,CX,HW)}
        else clJ(g,FR,CX,HW);
        const ey=Math.min(ep<.8?tY:FR,FR)-1;
        set(g,ey,CX-6,'@','e');set(g,ey,CX+6,'@','e');
    }else if(p===3){
        const wg=Math.round(Math.sin(t*.3));
        clJ(g,FR,CX+wg,HW);
        set(g,FR-1,CX+wg-6,pr>.35?'^':'@','e');
        set(g,FR-1,CX+wg+6,pr>.35?'^':'@','e');
        if(pr<.6&&(Math.floor(t*.18)%2===0||pr<.2))
            putA(g,FR-3,CX-9,' *** CHOMP!! ***  ','t');
        if(pr<.08)for(let i=0;i<5;i++)set(g,FR+(0|((Math.random()-.5)*5)),CX+(0|((Math.random()-.5)*18)),'*','t');
    }else if(p===4){
        const ep=eio(pr);
        const sY=Math.round(FR+ep*(H+5-FR));
        clJ(g,sY,CX,HW);
        set(g,sY-1,CX-6,'^','e');set(g,sY-1,CX+6,'^','e');
        if(pr<.22)putA(g,sY-2,CX-3,'*burp*','t');
    }

    render(g);t++;
}

let last=0;
function loop(ts){requestAnimationFrame(loop);if(ts-last<75)return;last=ts;frame()}
requestAnimationFrame(loop);
})();
</script>


</body></html>